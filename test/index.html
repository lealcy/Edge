<!doctype html>
<html lang='en'>
    <head>
        <meta charset='UTF-8' />
        <title>tile engine</title>
    </head>
    <body>
        <canvas id='canvas' width='640' height='480'></canvas>
        <script src='../src/Game.js'></script>
        <script src='../src/Events.js'></script>
        <script src='../src/Images.js'></script>
        <script src='../src/Mouse.js'></script>
        <script src='../src/Keyboard.js'></script>
        <script src='../src/Actor.js'></script>
        <script>
            var images = {};
            var game = new Game.Game(document.querySelector("#canvas"), images);
            var actor = new Game.Actor(game);
            
            actor.oldX = actor.x;
            actor.oldY = actor.y;

            actor.on("refresh", function(self) { 
                game.context.clearRect(self.oldX, self.oldY, self.width, self.height);
                game.context.fillRect(self.x, self.y, self.width, self.height); 
            });
            
            // Clear the old box position.
            actor.on("keyDown", function(self) {  });
            actor.on("keyDown" + Game.KEY_UP, function(self) { 
                self.oldY = self.y;
                self.y--; 
            });
            actor.on("keyDown" + Game.KEY_RIGHT, function(self) { 
                self.oldX = self.x;
                self.x++; 
            });
            actor.on("keyDown" + Game.KEY_DOWN, function(self) { 
                self.oldY = self.y;
                self.y++; 
            });
            actor.on("keyDown" + Game.KEY_LEFT, function(self) { 
                self.oldX = self.x;
                self.x--; 
            });
            actor.on("mouseDrag", function(self, e) {
                self.oldX = self.x;
                self.oldY = self.y
                self.x = e.x;
                self.y = e.y;
            });
            
            game.start();
        </script>
    </body>
</html>
